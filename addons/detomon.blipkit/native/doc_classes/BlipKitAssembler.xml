<?xml version="1.0" encoding="UTF-8" ?>
<class name="BlipKitAssembler" inherits="RefCounted" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/godotengine/godot/master/doc/class.xsd">
	<brief_description>
		An object used to generate byte code which can be interpreted by [BlipKitInterpreter].
	</brief_description>
	<description>
	</description>
	<tutorials>
	</tutorials>
	<methods>
		<method name="clear">
			<return type="void" />
			<description>
				Clears all instructions and errors.
			</description>
		</method>
		<method name="compile">
			<return type="PackedByteArray" />
			<description>
				Resolves label addresses and returns the generated byte code.
				The object can then be reused to generate new byte code.
			</description>
		</method>
		<method name="get_compile_error" qualifiers="const">
			<return type="String" />
			<description>
				Returns the compilation error or an empty string if no error occured.
			</description>
		</method>
		<method name="put">
			<return type="void" />
			<param index="0" name="instruction" type="int" enum="BlipKitAssembler.Instruction" />
			<param index="1" name="arg_1" type="Variant" default="null" />
			<param index="2" name="arg_2" type="Variant" default="null" />
			<param index="3" name="arg_3" type="Variant" default="null" />
			<description>
				Adds an instruction to the byte code and returns [code]true[/code] on success. See [enum Instruction] for the required arguments.
				Returns [code]false[/code], if the arguments are invalid for the given instruction.
			</description>
		</method>
		<method name="put_label">
			<return type="bool" />
			<param index="0" name="label" type="String" />
			<description>
				Adds a named label at the current byte code position which can be used by [enum Instruction.INSTR_CALL] and [enum Instruction.INSTR_JUMP] instrutions.
			</description>
		</method>
	</methods>
	<constants>
		<constant name="INSTR_NOTE" value="1" enum="Instruction">
			Sets [member BlipKitTrack.note]. Expects a [float] argument.
		</constant>
		<constant name="INSTR_WAVEFORM" value="2" enum="Instruction">
			Sets [member BlipKitTrack.waveform]. Expects [enum BlipKitTrack.Waveform] as an [int] argument.
		</constant>
		<constant name="INSTR_CUSTOM_WAVEFORM" value="3" enum="Instruction">
			Sets [member BlipKitTrack.custom_waveform]. Expects a slot index from [code]0[/code] to [code]255[/code] as [int] argument.
			The [BlipKitWaveform] used is define with [member BlipKitInterpreter.set_waveform_at].
		</constant>
		<constant name="INSTR_DUTY_CYCLE" value="4" enum="Instruction">
			Sets [member BlipKitTrack.duty_cycle]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_EFFECT_DIVIDER" value="5" enum="Instruction">
			Sets [member BlipKitTrack.effect_divider]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_VOLUME" value="6" enum="Instruction">
			Sets [member BlipKitTrack.volume]. Expects a [float] argument.
		</constant>
		<constant name="INSTR_VOLUME_SLIDE" value="7" enum="Instruction">
			Sets [member BlipKitTrack.volume_slide]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_MASTER_VOLUME" value="8" enum="Instruction">
			Sets [member BlipKitTrack.master_volume]. Expects a [float] argument.
		</constant>
		<constant name="INSTR_PANNING" value="9" enum="Instruction">
			Sets [member BlipKitTrack.panning]. Expects a [float] argument.
		</constant>
		<constant name="INSTR_PANNING_SLIDE" value="10" enum="Instruction">
			Sets [member BlipKitTrack.panning_slide]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_PITCH" value="11" enum="Instruction">
			Sets [member BlipKitTrack.pitch]. Expects a [float] argument.
		</constant>
		<constant name="INSTR_PHASE_WRAP" value="12" enum="Instruction">
			Sets [member BlipKitTrack.phase_wrap]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_PORTAMENTO" value="13" enum="Instruction">
			Sets [member BlipKitTrack.portamento]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_VIBRATO" value="14" enum="Instruction">
			Calls [method BlipKitTrack.set_vibrato]. Expects [code]ticks[/code] ([int]), [code]delta[/code] ([float]) and [code]slide_ticks[/code] ([int]).
		</constant>
		<constant name="INSTR_TREMOLO" value="15" enum="Instruction">
			Calls [method BlipKitTrack.set_tremolo]. Expects [code]ticks[/code] ([int]), [code]delta[/code] ([float]) and [code]slide_ticks[/code] ([int]).
		</constant>
		<constant name="INSTR_ARPEGGIO" value="16" enum="Instruction">
			Sets [member BlipKitTrack.arpeggio]. Expects a [PackedFloat32Array] argument.
		</constant>
		<constant name="INSTR_ARPEGGIO_DIVIDER" value="17" enum="Instruction">
			Sets [member BlipKitTrack.arpeggio_divider]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_INSTRUMENT" value="18" enum="Instruction">
			Sets [member BlipKitTrack.instrument]. Expects a slot index from [code]0[/code] to [code]255[/code] as [int] argument.
			The [BlipKitInstrument] used is define with [member BlipKitInterpreter.set_instrument_at].
		</constant>
		<constant name="INSTR_INSTRUMENT_DIVIDER" value="19" enum="Instruction">
			Sets [member BlipKitTrack.instruent_divider]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_WAIT" value="20" enum="Instruction">
			Waits for a number of [i]ticks[/i]. Expects an [int] argument.
		</constant>
		<constant name="INSTR_CALL" value="21" enum="Instruction">
			Calls a named label like a function. Expects a label name as [String] argument.
			[b]Note:[/b] The label is not required to be defined at this point and can also be set later with [member put_label].
			[b]Note:[/b] The stack size is limited to [code]64[/code]. If this limit is reached, the call is ignored and a stack overflow error is generated.
		</constant>
		<constant name="INSTR_RETURN" value="22" enum="Instruction">
			Returns from a function call made with [constant INSTR_CALL]. If no call was made before, a stack underflow error is generated.
		</constant>
		<constant name="INSTR_JUMP" value="23" enum="Instruction">
			Jumps a named label. Expects a label name as [String] argument.
		</constant>
		<constant name="INSTR_RESET" value="24" enum="Instruction">
			Calls [method BlipKitTrack.reset]. Expects no arguments.
		</constant>
	</constants>
</class>
